# ========================================================================
# CONFIGURACIÓN DE SEGURIDAD PARA API BRIDGE
# ========================================================================

# Denegar acceso a archivos de configuración y logs
<FilesMatch "(api_config\.php|\.log)$">
    Order allow,deny
    Deny from all
</FilesMatch>

# Denegar acceso al directorio de caché
<DirectoryMatch "cache">
    Order allow,deny
    Deny from all
</DirectoryMatch>

# Permitir solo GET requests (POST se habilitará en Fase 2)
<LimitExcept GET>
    Order allow,deny
    Deny from all
</LimitExcept>

# Activar compresión de respuestas JSON
<IfModule mod_deflate.c>
    AddOutputFilterByType DEFLATE application/json
</IfModule>

# Cachear respuestas estáticas
<IfModule mod_expires.c>
    ExpiresActive On
    ExpiresByType application/json "access plus 1 minute"
</IfModule>

# Protección contra directory listing
Options -Indexes

# Activar CORS para permitir peticiones desde el POS
Header set Access-Control-Allow-Origin "*"
Header set Access-Control-Allow-Methods "GET, OPTIONS"
Header set Access-Control-Allow-Headers "Content-Type"
